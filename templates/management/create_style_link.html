<!--
  Copyright [2025] [OBARA (Nanjing) Electromechanical Co., Ltd]

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->


{% extends 'base.html' %}

{% block title %}创建新式样 - 小原焊枪选型数据库{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4 fade-in-up">
            <h1 class="display-6 fw-bold">
                <i class="bi bi-link-45deg me-2"></i>
                创建新式样
            </h1>
            <div>
                <a href="{% url 'clamps:my_style_links' %}" class="btn btn-outline-secondary me-2">
                    <i class="bi bi-list me-2"></i>
                    我的式样链接
                </a>
                <a href="{% url 'clamps:management_dashboard' %}" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left me-2"></i>
                    返回仪表板
                </a>
            </div>
        </div>
        
        <!-- 创建新式样表单 -->
        <div class="card fade-in-up">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="bi bi-plus-circle me-2"></i>
                    式样链接配置
                </h5>
            </div>
            <div class="card-body">
                <form method="post" action="{% url 'clamps:create_style_link' %}">
                    {% csrf_token %}
                    
                    <div class="row g-3">
                        <!-- 基本信息 -->
                        <div class="col-md-6">
                            <label for="name" class="form-label">
                                <i class="bi bi-tag me-2"></i>
                                链接备注
                            </label>
                            <input type="text" class="form-control" id="name" name="name" placeholder="请输入链接备注名称">
                            <div class="form-text">用于标识该链接的用途，方便后续管理</div>
                        </div>
                        
                        <div class="col-md-3">
                            <label for="ai_disabled" class="form-label">
                                <i class="bi bi-brain me-2"></i>
                                禁用AI智能搜索
                            </label>
                            <div class="form-check form-switch mt-2">
                                <input class="form-check-input" type="checkbox" id="ai_disabled" name="ai_disabled" checked>
                                <label class="form-check-label" for="ai_disabled">禁用AI智能搜索</label>
                            </div>
                        </div>
                        
                        <div class="col-md-3">
                            <label for="expires_days" class="form-label">
                                <i class="bi bi-clock me-2"></i>
                                有效期（天）
                            </label>
                            <input type="number" class="form-control" id="expires_days" name="expires_days" min="0" max="365" value="0">
                            <div class="form-text">设置为0表示永久有效</div>
                        </div>
                        
                        <div class="col-md-3">
                            <label for="max_clicks" class="form-label">
                                <i class="bi bi-mouse me-2"></i>
                                最大点击次数
                            </label>
                            <input type="number" class="form-control" id="max_clicks" name="max_clicks" min="0" value="0">
                            <div class="form-text">设置为0表示无限制</div>
                        </div>
                        
                        <div class="col-md-3">
                            <label for="required_chars" class="form-label">
                                <i class="bi bi-type me-2"></i>
                                必须包含字符
                            </label>
                            <input type="text" class="form-control" id="required_chars" name="required_chars" placeholder="例如：ABC">
                            <div class="form-text">搜索结果中必须包含的字符</div>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <h6>
                            <i class="bi bi-sliders me-2"></i>
                            搜索字段配置
                        </h6>
                        <p class="text-muted small">选择在链接中哪些搜索选项是可选的，哪些是禁用的，哪些是固定的</p>
                    </div>
                    
                    <div class="row g-3 mt-2">
                        <!-- 产品分类 -->
                        <div class="col-md-12">
                            <label class="form-label">
                                <i class="bi bi-folder2 me-2"></i>
                                产品分类（可多选，未勾选的将被禁用）
                            </label>
                            <div class="border p-3 rounded">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="category_large" checked>
                                    <label class="form-check-label">大型</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="category_medium" checked>
                                    <label class="form-check-label">中型</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="category_small" checked>
                                    <label class="form-check-label">小型</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="category_crane" checked>
                                    <label class="form-check-label">仙鹤型</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="category_special" checked>
                                    <label class="form-check-label">特殊</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="category_x_type" checked>
                                    <label class="form-check-label">X型</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="category_y_type" checked>
                                    <label class="form-check-label">Y型</label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 子分类类型 -->
                        <div class="col-md-12">
                            <label class="form-label">
                                <i class="bi bi-folder-symlink me-2"></i>
                                子分类类型
                            </label>
                            <div class="alert alert-info" role="alert">
                                <i class="bi bi-info-circle me-2"></i>
                                子分类类型禁止定义，将根据产品分类自动显示
                            </div>
                        </div>
                        
                        <!-- 变压器类型 -->
                        <div class="col-md-12">
                            <label class="form-label">
                                <i class="bi bi-gear me-2"></i>
                                变压器类型（可多选，未勾选的将被禁用）
                            </label>
                            <div class="border p-3 rounded">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="transformer_ITS85" checked>
                                    <label class="form-check-label">ITS85</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="transformer_DB6_100R1" checked>
                                    <label class="form-check-label">DB6-100R1</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="transformer_RT552" checked>
                                    <label class="form-check-label">RT552</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="transformer_RT752" checked>
                                    <label class="form-check-label">RT752</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="transformer_BOSCH" checked>
                                    <label class="form-check-label">BOSCH</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="transformer_SHANGKE" checked>
                                    <label class="form-check-label">商科</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="transformer_RT906" checked>
                                    <label class="form-check-label">RT906</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="transformer_RT706" checked>
                                    <label class="form-check-label">RT706</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="transformer_NI110" checked>
                                    <label class="form-check-label">NI110</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="transformer_RT452" checked>
                                    <label class="form-check-label">RT452</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="transformer_OTHER" checked>
                                    <label class="form-check-label">其他</label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 基本搜索字段 -->
                        <div class="col-md-12">
                            <label class="form-label">
                                <i class="bi bi-check-square me-2"></i>
                                基本搜索字段（可多选，未勾选的将被禁用）
                            </label>
                            <div class="border p-3 rounded">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="drawing_no_1" checked>
                                            <label class="form-check-label">图号1</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="clamping_force" checked>
                                            <label class="form-check-label">加压力</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="stroke" checked>
                                            <label class="form-check-label">行程</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="description">
                                            <label class="form-check-label">描述</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="weight">
                                            <label class="form-check-label">重量</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="motor_manufacturer">
                                            <label class="form-check-label">MOTOR厂家</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="throat_depth">
                                            <label class="form-check-label">喉深</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="throat_width">
                                            <label class="form-check-label">喉宽</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 固定字段配置 -->
                        <div class="col-md-12">
                            <label class="form-label">
                                <i class="bi bi-lock me-2"></i>
                                固定字段配置（可选）
                            </label>
                            <div class="border p-3 rounded">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label for="fixed_motor_manufacturer" class="form-label">固定MOTOR厂家</label>
                                        <select class="form-select" id="fixed_motor_manufacturer" name="fixed_fields[motor_manufacturer]">
                                            <option value="">不固定</option>
                                            <option value="FANUC">FANUC</option>
                                            <option value="KUKA">KUKA</option>
                                            <option value="YASKAWA">YASKAWA</option>
                                            <option value="ABB">ABB</option>
                                            <option value="TOLOMATIC">TOLOMATIC</option>
                                            <option value="多摩川">多摩川</option>
                                            <option value="PANASONIC">PANASONIC</option>
                                            <option value="DIAKONT">DIAKONT</option>
                                            <option value="SEW">SEW</option>
                                            <option value="SANYO">SANYO</option>
                                            <option value="其他">其他</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="fixed_has_balance" class="form-label">固定有无平衡</label>
                                        <select class="form-select" id="fixed_has_balance" name="fixed_fields[has_balance]">
                                            <option value="">不固定</option>
                                            <option value="有">有</option>
                                            <option value="无">无</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="fixed_water_circuit" class="form-label">固定水路</label>
                                        <select class="form-select" id="fixed_water_circuit" name="fixed_fields[water_circuit]">
                                            <option value="">不固定</option>
                                            <option value="1进1出">1进1出</option>
                                            <option value="2进2出">2进2出</option>
                                            <option value="3进3出">3进3出</option>
                                            <option value="1进2出">1进2出</option>
                                            <option value="2进3出">2进3出</option>
                                            <option value="1进3出">1进3出</option>
                                            <option value="其他">其他</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 text-center">
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-save me-2"></i>
                            生成式样链接
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}