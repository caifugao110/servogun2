<!--
  Copyright [2025] [OBARA (Nanjing) Electromechanical Co., Ltd]

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

{% extends 'base.html' %}

{% block title %}鐢ㄦ埛鍙嶉 - 灏忓師鐒婃灙閫夊瀷鏁版嵁搴搟% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="card shadow-lg fade-in-up">
        <div class="card-header bg-gradient-primary text-white">
            <h3 class="mb-0">
                <i class="bi bi-chat-dots me-2"></i>
                鐢ㄦ埛鍙嶉
            </h3>
        </div>
        <div class="card-body p-5">
            <p class="text-muted mb-4">鎰熻阿鎮ㄤ娇鐢ㄥ皬鍘熺剨鏋€夊瀷鏁版嵁搴擄紒鎴戜滑闈炲父閲嶈鎮ㄧ殑鍙嶉锛岃繖灏嗗府鍔╂垜浠笉鏂敼杩涗骇鍝佸拰鏈嶅姟銆?/p>
            
            <form method="post" class="needs-validation" novalidate>
                {% csrf_token %}
                
                <!-- 鍙嶉鍒嗙被 -->
                <div class="mb-4">
                    <label for="category" class="form-label required">
                        <i class="bi bi-tag text-primary me-2"></i>
                        鍙嶉鍒嗙被
                    </label>
                    <select class="form-select" id="category" name="category" required>
                        <option value="">璇烽€夋嫨鍙嶉鍒嗙被</option>
                        <option value="鏁版嵁閿欒">鏁版嵁閿欒</option>
                        <option value="鏁版嵁涓㈠け">鏁版嵁涓㈠け</option>
                        <option value="绯荤粺閿欒">绯荤粺閿欒</option>
                        <option value="鍔熻兘浼樺寲">鍔熻兘浼樺寲</option>
                        <option value="鍏朵粬寤鸿">鍏朵粬寤鸿</option>
                    </select>
                    <div class="invalid-feedback">璇烽€夋嫨鍙嶉鍒嗙被</div>
                </div>
                
                <!-- 鍙嶉鍐呭 -->
                <div class="mb-4">
                    <label class="form-label">
                        <i class="bi bi-file-text text-primary me-2"></i>
                        鍙嶉鍐呭
                    </label>
                    <div class="p-4 rounded-3 border">
                        <!-- 鐩稿叧閾炬帴 -->
                        <div class="mb-3">
                            <label for="related_link" class="form-label">
                                <i class="bi bi-link text-secondary me-2"></i>
                                鐩稿叧閾炬帴 <span class="text-muted">(鍙€?</span>
                            </label>
                            <input type="url" class="form-control" id="related_link" name="related_link" placeholder="璇疯緭鍏ョ浉鍏抽摼鎺ワ紙濡傞€傜敤锛?>
                            <div class="invalid-feedback">璇疯緭鍏ユ湁鏁堢殑URL</div>
                        </div>
                        
                        <!-- 鍐呭璇存槑 -->
                        <div class="mb-3">
                            <label for="content" class="form-label required">
                                <i class="bi bi-pencil-square text-secondary me-2"></i>
                                鍐呭璇存槑
                            </label>
                            <textarea class="form-control" id="content" name="content" rows="5" placeholder="璇疯缁嗘弿杩版偍鐨勯棶棰樻垨寤鸿" required></textarea>
                            <div class="invalid-feedback">璇峰～鍐欏唴瀹硅鏄?/div>
                        </div>
                    </div>
                </div>
                
                <!-- 鑱旂郴鏂瑰紡 -->
                <div class="mb-4">
                    <label class="form-label">
                        <i class="bi bi-person text-primary me-2"></i>
                        鑱旂郴鏂瑰紡 <span class="text-muted">(鍙€?</span>
                    </label>
                    <div class="p-4 rounded-3 border">
                        <div class="row g-3">
                            <!-- 濮撳悕 -->
                            <div class="col-md-4">
                                <label for="contact_name" class="form-label">
                                    <i class="bi bi-person-fill text-secondary me-2"></i>
                                    濮撳悕
                                </label>
                                <input type="text" class="form-control" id="contact_name" name="contact_name" placeholder="璇疯緭鍏ユ偍鐨勫鍚?>
                            </div>
                            
                            <!-- 鐢佃瘽 -->
                            <div class="col-md-4">
                                <label for="contact_phone" class="form-label">
                                    <i class="bi bi-telephone-fill text-secondary me-2"></i>
                                    鐢佃瘽
                                </label>
                                <input type="tel" class="form-control" id="contact_phone" name="contact_phone" placeholder="璇疯緭鍏ユ偍鐨勭數璇?>
                            </div>
                            
                            <!-- 閭 -->
                            <div class="col-md-4">
                                <label for="contact_email" class="form-label">
                                    <i class="bi bi-envelope-fill text-secondary me-2"></i>
                                    閭
                                </label>
                                <input type="email" class="form-control" id="contact_email" name="contact_email" placeholder="璇疯緭鍏ユ偍鐨勯偖绠?>
                                <div class="invalid-feedback">璇疯緭鍏ユ湁鏁堢殑閭鍦板潃</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 鎻愪氦鎸夐挳 -->
                <div class="text-center mt-5">
                    <button type="submit" class="btn btn-primary btn-lg px-5 py-2" id="submit-btn" disabled>
                        <i class="bi bi-send me-2"></i>
                        鎻愪氦鍙嶉
                    </button>
                </div>
            </form>
        </div>
        <div class="card-footer text-center text-muted">
            <p class="mb-0">
                <i class="bi bi-info-circle me-1"></i>
                鎴戜滑灏嗗敖蹇鐞嗘偍鐨勫弽棣堬紝濡傛湁闇€瑕佷細涓庢偍鑱旂郴銆?
            </p>
        </div>
    </div>
</div>

<script>
    // 琛ㄥ崟楠岃瘉
    (function () {
        'use strict'
        var forms = document.querySelectorAll('.needs-validation')
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }
                    form.classList.add('was-validated')
                }, false)
            })
    })()
    
    // 鍔ㄦ€侀獙璇侊紝鍚敤/绂佺敤鎻愪氦鎸夐挳
    document.addEventListener('DOMContentLoaded', function() {
        const categorySelect = document.getElementById('category');
        const contentTextarea = document.getElementById('content');
        const submitBtn = document.getElementById('submit-btn');
        
        // 妫€鏌ュ瓧娈垫槸鍚﹀凡濉啓
        function checkFields() {
            const categoryValue = categorySelect.value.trim();
            const contentValue = contentTextarea.value.trim();
            
            // 濡傛灉鍒嗙被鍜屽唴瀹归兘宸插～鍐欙紝鍒欏惎鐢ㄦ彁浜ゆ寜閽?
            if (categoryValue && contentValue) {
                submitBtn.disabled = false;
            } else {
                submitBtn.disabled = true;
            }
        }
        
        // 鐩戝惉瀛楁鍙樺寲
        categorySelect.addEventListener('change', checkFields);
        contentTextarea.addEventListener('input', checkFields);
        
        // 鍒濆妫€鏌?
        checkFields();
    });
</script>
{% endblock %}
