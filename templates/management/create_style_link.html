<!--
  Copyright [2025] [OBARA (Nanjing) Electromechanical Co., Ltd]

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->


{% extends 'base.html' %}

{% block title %}创建新仕样 - 小原焊枪选型数据库{% endblock %}

{% block extra_css %}
<style>
    /* 优化复选框样式，使其在白色主题下更醒目 */
    .form-check-input {
        width: 1.25em;
        height: 1.25em;
        margin-top: 0.25em;
        vertical-align: top;
        background-color: #fff;
        background-repeat: no-repeat;
        background-position: center;
        background-size: contain;
        border: 2px solid #adb5bd;
        border-radius: 0.375em;
        appearance: none;
        -webkit-appearance: none;
        transition: all 0.2s ease-in-out;
        cursor: pointer;
    }
    
    /* 选中状态样式 */
    .form-check-input:checked {
        background-color: #0066cc;
        border-color: #0066cc;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='m6 10 3 3 6-6'/%3e%3c/svg%3e");
        box-shadow: 0 0 0 0.25rem rgba(0, 102, 204, 0.25);
    }
    
    /* 悬停状态样式 */
    .form-check-input:hover {
        border-color: #0066cc;
    }
    
    /* 聚焦状态样式 */
    .form-check-input:focus {
        border-color: #0066cc;
        outline: 0;
        box-shadow: 0 0 0 0.25rem rgba(0, 102, 204, 0.25);
    }
    
    /* 禁用状态样式 */
    .form-check-input:disabled {
        pointer-events: none;
        opacity: 0.6;
    }
    
    /* 调整标签样式，确保与复选框对齐 */
    .form-check-label {
        margin-left: 0.5em;
        font-weight: 500;
        cursor: pointer;
    }
    
    /* 优化行内复选框的间距 */
    .form-check-inline {
        margin-right: 1.5rem;
        margin-bottom: 0.5rem;
    }
    
    /* 优化普通复选框的间距 */
    .form-check {
        margin-bottom: 0.75rem;
    }
    
    /* 优化边界和背景，提高整体对比度 */
    .border {
        border: 1px solid #dee2e6 !important;
        background-color: #f8f9fa;
    }
    
    /* 优化标签样式 */
    .form-label {
        font-weight: 600;
        color: #2c3e50;
    }
    
    /* Dark主题下的样式 */
    [data-bs-theme="dark"] .form-check-input {
        background-color: #343a40;
        border-color: #6c757d;
    }
    
    [data-bs-theme="dark"] .form-check-input:checked {
        background-color: #0066cc;
        border-color: #0066cc;
        box-shadow: 0 0 0 0.25rem rgba(0, 102, 204, 0.25);
    }
    
    [data-bs-theme="dark"] .form-check-input:hover {
        border-color: #0066cc;
    }
    
    [data-bs-theme="dark"] .form-check-input:focus {
        border-color: #0066cc;
        box-shadow: 0 0 0 0.25rem rgba(0, 102, 204, 0.25);
    }
    
    [data-bs-theme="dark"] .form-check-label {
        color: #adb5bd;
    }
    
    [data-bs-theme="dark"] .border {
        border: 1px solid #495057 !important;
        background-color: #212529;
    }
    
    [data-bs-theme="dark"] .form-label {
        color: #adb5bd;
    }
</style>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4 fade-in-up">
            <h1 class="display-6 fw-bold">
                <i class="bi bi-link-45deg me-2"></i>
                创建新仕样
            </h1>
            <div>
                <a href="{% url 'clamps:my_style_links' %}" class="btn btn-outline-secondary me-2">
                    <i class="bi bi-list me-2"></i>
                    我的仕样链接
                </a>
                <a href="{% url 'clamps:management_dashboard' %}" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left me-2"></i>
                    返回仪表板
                </a>
            </div>
        </div>
        
        <!-- 创建新仕样表单 -->
        <div class="card fade-in-up">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="bi bi-plus-circle me-2"></i>
                    仕样链接配置
                </h5>
            </div>
            <div class="card-body">
                <form method="post" action="{% url 'clamps:create_style_link' %}">
                    {% csrf_token %}
                    
                    <div class="row g-3">
                        <!-- 基本信息 -->
                        <div class="col-md-6">
                            <label for="name" class="form-label">
                                <i class="bi bi-tag me-2"></i>
                                链接备注
                            </label>
                            <input type="text" class="form-control" id="name" name="name" placeholder="请输入链接备注名称">
                            <div class="form-text">用于标识该链接的用途，备注参考：至信选枪251202</div>
                        </div>
                        
                        <div class="col-md-3">
                            <label for="expires_days" class="form-label">
                                <i class="bi bi-clock me-2"></i>
                                有效期（天）
                            </label>
                            <input type="number" class="form-control" id="expires_days" name="expires_days" min="0" max="365" value="0">
                            <div class="form-text">设置为0表示永久有效</div>
                        </div>
                        
                        <div class="col-md-3">
                            <label for="max_clicks" class="form-label">
                                <i class="bi bi-mouse me-2"></i>
                                最大点击次数
                            </label>
                            <input type="number" class="form-control" id="max_clicks" name="max_clicks" min="0" value="0">
                            <div class="form-text">设置为0表示无限制</div>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <h6>
                            <i class="bi bi-sliders me-2"></i>
                            搜索配置信息
                        </h6>
                        <p class="text-muted small">配置仕样搜索界面的显示选项和固定值</p>
                    </div>
                    
                    <div class="row g-3 mt-2">
                        <!-- 产品分类 -->
                        <div class="col-md-12">
                            <label class="form-label">
                                <i class="bi bi-folder2 me-2"></i>
                                产品分类（可多选，未勾选的将不会显示）
                            </label>
                            <div class="border p-3 rounded">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="product_categories[]" value="X2C-C_recommended">
                                    <label class="form-check-label">X2C-C(推荐)</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="product_categories[]" value="X2C-X_recommended">
                                    <label class="form-check-label">X2C-X(推荐)</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="product_categories[]" value="X2C-V2-C">
                                    <label class="form-check-label">X2C-V2-C</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="product_categories[]" value="X2C-V2-X">
                                    <label class="form-check-label">X2C-V2-X</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="product_categories[]" value="X2C-V3-C">
                                    <label class="form-check-label">X2C-V3-C</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" name="product_categories[]" value="X2C-V3-X">
                                    <label class="form-check-label">X2C-V3-X</label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 子分类类型 -->
                        <div class="col-md-12">
                            <label class="form-label">
                                <i class="bi bi-folder-symlink me-2"></i>
                                子分类类型
                            </label>
                            <div class="alert alert-info" role="alert">
                                <i class="bi bi-info-circle me-2"></i>
                                子分类类型禁止定义，将根据产品分类自动显示
                            </div>
                        </div>
                        
                        <!-- 变压器类型 -->
                        <div class="col-md-12">
                            <label class="form-label">
                                <i class="bi bi-gear me-2"></i>
                                变压器类型（可多选，必须至少选择一项，未勾选的将不会显示）
                            </label>
                            <div class="border p-3 rounded">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="ITS85">
                                            <label class="form-check-label">ITS85</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="DB6-100R1" id="db6-100r1">
                                            <label class="form-check-label">DB6-100R1</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="RT552">
                                            <label class="form-check-label">RT552</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="RT752">
                                            <label class="form-check-label">RT752</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="BOSCH">
                                            <label class="form-check-label">BOSCH</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="商科">
                                            <label class="form-check-label">商科</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="RT906">
                                            <label class="form-check-label">RT906</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="RT706">
                                            <label class="form-check-label">RT706</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="NI110">
                                            <label class="form-check-label">NI110</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="RT452">
                                            <label class="form-check-label">RT452</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="其他">
                                            <label class="form-check-label">其他</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="DB6-90-510" id="db6-90-510">
                                            <label class="form-check-label">DB6-90-510</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="DB6-225-510(B)">
                                            <label class="form-check-label">DB6-225-510(B)</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="SMF-100">
                                            <label class="form-check-label">SMF-100</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="MF-100">
                                            <label class="form-check-label">MF-100</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="DB6-90" id="db6-90">
                                            <label class="form-check-label">DB6-90</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="DB6-100" id="db6-100">
                                            <label class="form-check-label">DB6-100</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="transformers[]" value="DB6" id="db6">
                                            <label class="form-check-label">DB6</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- MOTOR厂家类型 -->
                        <div class="col-md-12">
                            <label class="form-label">
                                <i class="bi bi-gear-wide-connected me-2"></i>
                                MOTOR厂家类型（可多选，必须至少选择一项，未勾选的将不会显示）
                            </label>
                            <div class="border p-3 rounded">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="motor_manufacturers[]" value="FANUC" checked>
                                            <label class="form-check-label">FANUC</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="motor_manufacturers[]" value="KUKA" checked>
                                            <label class="form-check-label">KUKA</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="motor_manufacturers[]" value="YASKAWA" checked>
                                            <label class="form-check-label">YASKAWA</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="motor_manufacturers[]" value="ABB" checked>
                                            <label class="form-check-label">ABB</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="motor_manufacturers[]" value="TOLOMATIC" checked>
                                            <label class="form-check-label">TOLOMATIC</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="motor_manufacturers[]" value="多摩川" checked>
                                            <label class="form-check-label">多摩川</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="motor_manufacturers[]" value="PANASONIC" checked>
                                            <label class="form-check-label">PANASONIC</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="motor_manufacturers[]" value="DIAKONT" checked>
                                            <label class="form-check-label">DIAKONT</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="motor_manufacturers[]" value="SEW" checked>
                                            <label class="form-check-label">SEW</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="motor_manufacturers[]" value="SANYO" checked>
                                            <label class="form-check-label">SANYO</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="motor_manufacturers[]" value="其他" checked>
                                            <label class="form-check-label">其他</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 齿轮箱型式 -->
                        <div class="col-md-12">
                            <label class="form-label">
                                <i class="bi bi-cog me-2"></i>
                                齿轮箱型式（可多选，必须至少选择一项，未勾选的将不会显示）
                            </label>
                            <div class="border p-3 rounded">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="gearbox_types[]" value="低压" checked>
                                            <label class="form-check-label">低压</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="gearbox_types[]" value="高压" checked>
                                            <label class="form-check-label">高压</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="gearbox_types[]" value="联轴器型" checked>
                                            <label class="form-check-label">联轴器型</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="gearbox_types[]" value="中空" checked>
                                            <label class="form-check-label">中空</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="gearbox_types[]" value="TOLOMATIC" checked>
                                            <label class="form-check-label">TOLOMATIC</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="gearbox_types[]" value="偏心" checked>
                                            <label class="form-check-label">偏心</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="gearbox_types[]" value="折回" checked>
                                            <label class="form-check-label">折回</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="gearbox_types[]" value="OBARA-中空" checked>
                                            <label class="form-check-label">OBARA-中空</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="gearbox_types[]" value="DIAKONT" checked>
                                            <label class="form-check-label">DIAKONT</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 数值型搜索条件锁定配置 -->
                        <div class="col-md-12">
                            <label class="form-label">
                                <i class="bi bi-lock me-2"></i>
                                数值型搜索条件锁定配置（定义具体数值后将在搜索页面中固定显示且不可更改）
                            </label>
                            <div class="border p-3 rounded">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label for="fixed_drawing_no_1" class="form-label">图号1(o)</label>
                                        <input type="text" class="form-control" id="fixed_drawing_no_1" name="fixed_fields[drawing_no_1]" placeholder="不定义则允许用户输入">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="fixed_description" class="form-label">描述</label>
                                        <input type="text" class="form-control" id="fixed_description" name="fixed_fields[description]" placeholder="不定义则允许用户输入">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="fixed_clamping_force" class="form-label">固压力</label>
                                        <input type="text" class="form-control" id="fixed_clamping_force" name="fixed_fields[clamping_force]" placeholder="例如：~3500, 3500~5500, 5500~，不定义则允许用户输入">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="fixed_stroke" class="form-label">行程</label>
                                        <input type="text" class="form-control" id="fixed_stroke" name="fixed_fields[stroke]" placeholder="例如：~90, 100~190, 210~，不定义则允许用户输入">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="fixed_throat_depth" class="form-label">喉深</label>
                                        <input type="text" class="form-control" id="fixed_throat_depth" name="fixed_fields[throat_depth]" placeholder="例如：~100, 100~200, 200~，不定义则允许用户输入">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="fixed_throat_width" class="form-label">喉宽</label>
                                        <input type="text" class="form-control" id="fixed_throat_width" name="fixed_fields[throat_width]" placeholder="例如：~50, 50~100, 100~，不定义则允许用户输入">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 其他搜索字段显示控制 -->
                        <div class="col-md-12">
                            <label class="form-label">
                                <i class="bi bi-eye me-2"></i>
                                其他搜索字段显示控制（取消勾选的字段将不在搜索页面中显示）
                            </label>
                            <div class="border p-3 rounded">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="transformer_placement" checked>
                                            <label class="form-check-label">变压器放置方向</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="bracket_direction" checked>
                                            <label class="form-check-label">托架方向</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="has_balance">
                                            <label class="form-check-label">有无平衡</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="weight">
                                            <label class="form-check-label">重量</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="flange_pcd">
                                            <label class="form-check-label">法兰P.C.D</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="water_circuit">
                                            <label class="form-check-label">水路</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="electrode_arm_end">
                                            <label class="form-check-label">电极臂端部</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="eccentricity">
                                            <label class="form-check-label">偏心距离</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="static_arm_front_length">
                                            <label class="form-check-label">静电极臂前部长</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="static_arm_front_height">
                                            <label class="form-check-label">静电极臂前部高</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="moving_arm_front_length">
                                            <label class="form-check-label">动电极臂前部长</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="enabled_fields[]" value="moving_arm_front_height">
                                            <label class="form-check-label">动电极臂前部高</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 text-center">
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-save me-2"></i>
                            生成仕样链接
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // DB6-100R1 和 DB6-100 自动关联
        const db6_100r1 = document.getElementById('db6-100r1');
        const db6_100 = document.getElementById('db6-100');
        
        if (db6_100r1 && db6_100) {
            db6_100r1.addEventListener('change', function() {
                db6_100.checked = this.checked;
            });
            
            db6_100.addEventListener('change', function() {
                db6_100r1.checked = this.checked;
            });
        }
        
        // DB6-90-510、DB6-90 和 DB6 自动关联
        const db6_90_510 = document.getElementById('db6-90-510');
        const db6_90 = document.getElementById('db6-90');
        const db6 = document.getElementById('db6');
        
        if (db6_90_510 && db6_90 && db6) {
            // 监听所有三个复选框的变化
            [db6_90_510, db6_90, db6].forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    // 无论是勾选还是取消勾选，其他两个都跟随当前状态
                    const checkedState = this.checked;
                    db6_90_510.checked = checkedState;
                    db6_90.checked = checkedState;
                    db6.checked = checkedState;
                });
            });
        }
    });
</script>
{% endblock %}